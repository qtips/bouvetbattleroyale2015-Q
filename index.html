<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<script src='js/settings.js'></script>
	<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
	<script src='js/functions.js'></script>
	<script src="//maps.google.com/maps/api/js" type="text/javascript"></script>
</head>
<script lang="javascript">
	
	$(document).ready(function() {
		register();


		$(document).ready(function() {
			var options = {
				enableHighAccuracy: true,
				timeout: 5000,
				maximumAge: 0
			};

			function success(pos) {
				var crd = pos.coords;

				console.log('Your current position is:');
				console.log('Latitude : ' + crd.latitude);
				console.log('Longitude: ' + crd.longitude);
				console.log('More or less ' + crd.accuracy + ' meters.');
				var locations = [
					['You are here', crd.latitude, crd.longitude, 4],
						// TODO Add more
				];

				var map = new google.maps.Map(document.getElementById('map'), {
					zoom: 17,
					center: new google.maps.LatLng(crd.latitude, crd.longitude),
					mapTypeId: google.maps.MapTypeId.ROADMAP
				});

				var infowindow = new google.maps.InfoWindow();

				var marker, i;

				for (i = 0; i < locations.length; i++) {
					marker = new google.maps.Marker({
						position: new google.maps.LatLng(locations[i][1], locations[i][2]),
						map: map
					});

					google.maps.event.addListener(marker, 'click', (function(marker, i) {
						return function() {
							infowindow.setContent(locations[i][0]);
							infowindow.open(map, marker);
						}
					})(marker, i));
				}

			};

			function error(err) {
				console.warn('ERROR(' + err.code + '): ' + err.message);
			};

			navigator.geolocation.getCurrentPosition(success, error, options);
		});		
	});
</script>

<body>
<h3>Hendelseslogg - felleskanal</h3>
<textarea readonly rows="20" cols="80" style="overflow:scroll;">
</textarea>
</br>
</br>
	<div>
        <h3>Registrer post: </h3>
		<span>Velg person</span>
		<select id="person">
			<option value='96625909'>Gareth</option>
			<option value='41469772'>Inge</option>
			<option value='99787444'>Karianne</option>
			<option value='47610324'>Qadeer</option>
		</select>	
	</div>
	<div id="register">
		<input id='postkode' type="text" placeholder="Tast inn kode" />
		<button onclick="register()">Registrer</button>
		<button onclick="register('BOMBE')">Registrer m/bombe</button>
		<button onclick="register('FELLE')">Registrer m/felle</button>	
	</div>

	<div id="map" style="width: 600px; height: 400px;"></div>

	<div id="messages">
		
	</div>
</body>
	
</html>